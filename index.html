<button id="press-btn">按我集氣</button>
<div class="progress"><div class="progress-bar" id="progress-bar"></div></div>

<script>
const button = document.getElementById('press-btn');
const progressBar = document.getElementById('progress-bar');

let pressCount = 0;
const requiredPresses = 10;
const maxInterval = 300;
let lastPressTime = 0;

// 禁止手機雙擊放大
let lastTouchEnd = 0;
document.addEventListener('touchend', function(event) {
  const now = Date.now();
  if (now - lastTouchEnd <= 300) event.preventDefault();
  lastTouchEnd = now;
}, false);

// 使用 touchend 監聽按鍵
button.addEventListener('touchend', (e) => {
  e.preventDefault(); // 防止瀏覽器點擊延遲
  const now = Date.now();

  if (pressCount > 0 && now - lastPressTime > maxInterval) pressCount = 0;

  pressCount++;
  lastPressTime = now;

  const progress = Math.min(pressCount / requiredPresses, 1);
  progressBar.style.transform = `scaleX(${progress})`;

  if (pressCount >= requiredPresses) {
    window.location.href = 'animation.html';
  }
});
</script>
